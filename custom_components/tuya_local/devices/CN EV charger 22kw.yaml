name: Моя Зарядная Станция
products:
  - id: s2wublk5n2pycus1
    manufacturer: TARY
    model: TA-AC380/22
    name: EV AC Charging Box
    model_id: 000004uqrl
entities:
  # DP 109: charging_state (Boolean)
  - entity: switch
    icon: "mdi:ev-station"
    translation_key: charging_state
    dps:
      - id: 109
        type: boolean
        name: switch

  # DP 103: voltage_phase_a (Value / integer, scale 2)
  - entity: sensor
    translation_key: voltage_phase
    translation_parameters:
      phase: A
    class: voltage
    dps:
      - id: 103
        type: integer
        name: sensor
        unit: V
        class: measurement
        mapping:
          - scale: 100

  # DP 104: voltage_phase_b (Value / integer, scale 2)
  - entity: sensor
    translation_key: voltage_phase
    translation_parameters:
      phase: B
    class: voltage
    dps:
      - id: 104
        type: integer
        name: sensor
        unit: V
        class: measurement
        mapping:
          - scale: 100

  # DP 105: voltage_phase_c (Value / integer, scale 2)
  - entity: sensor
    translation_key: voltage_phase
    translation_parameters:
      phase: C
    class: voltage
    dps:
      - id: 105
        type: integer
        name: sensor
        unit: V
        class: measurement
        mapping:
          - scale: 100

  # DP 106: electricity_phase_a (Value / integer, scale 2)
  - entity: sensor
    translation_key: current_phase
    translation_parameters:
      phase: A
    class: current
    dps:
      - id: 106
        type: integer
        name: sensor
        unit: A
        class: measurement
        mapping:
          - scale: 100

  # DP 107: electricity_phase_b (Value / integer, scale 2)
  - entity: sensor
    translation_key: current_phase
    translation_parameters:
      phase: B
    class: current
    dps:
      - id: 107
        type: integer
        name: sensor
        unit: A
        class: measurement
        mapping:
          - scale: 100

  # DP 108: electricity_phase_c (Value / integer, scale 2)
  - entity: sensor
    translation_key: current_phase
    translation_parameters:
      phase: C
    class: current
    dps:
      - id: 108
        type: integer
        name: sensor
        unit: A
        class: measurement
        mapping:
          - scale: 100

  # DP 131: electricity_total (Value / integer, scale 2)
  - entity: sensor
    translation_key: total_current
    class: current
    dps:
      - id: 131
        type: integer
        name: sensor
        unit: A
        class: measurement
        mapping:
          - scale: 100

  # DP 110: charge_electric_quantity (Value / integer, scale 2)
  - entity: sensor
    translation_key: charged_energy
    class: energy
    dps:
      - id: 110
        type: integer
        name: sensor
        unit: kWh
        class: total_increasing
        mapping:
          - scale: 100

  # DP 150: charge_power1 (Value / integer, scale 2)
  - entity: sensor
    translation_key: charging_power_1
    class: power
    dps:
      - id: 150
        type: integer
        name: sensor
        unit: kW
        class: measurement
        mapping:
          - scale: 100

  # DP 151: charge_power2 (Value / integer, scale 2)
  - entity: sensor
    translation_key: charging_power_2
    class: power
    dps:
      - id: 151
        type: integer
        name: sensor
        unit: kW
        class: measurement
        mapping:
          - scale: 100

  # DP 153: transaction_energy (Value / integer, scale 2)
  - entity: sensor
    translation_key: transaction_energy
    class: energy
    dps:
      - id: 153
        type: integer
        name: sensor
        unit: kWh
        class: total_increasing
        mapping:
          - scale: 100

  # DP 154: transaction_time (Value / integer, scale 0)
  - entity: sensor
    translation_key: transaction_time
    class: duration
    dps:
      - id: 154
        type: integer
        name: sensor
        unit: s
        class: measurement

  # DP 155: transaction_monry (Value / integer, scale 2)
  - entity: sensor
    translation_key: transaction_amount
    class: monetary
    dps:
      - id: 155
        type: integer
        name: sensor
        unit: RUB
        class: total_increasing
        mapping:
          - scale: 100

  # DP 156: transaction_status (Boolean)
  - entity: binary_sensor
    translation_key: transaction_status
    class: running
    dps:
      - id: 156
        type: boolean
        name: sensor

  # DP 115: rated_current (Value / integer, scale 2)
  - entity: number
    translation_key: rated_current
    category: config
    class: current
    mode: box
    icon: "mdi:current-ac"
    dps:
      - id: 115
        type: integer
        name: value
        unit: A
        range:
          min: 0
          max: 200
        mapping:
          - scale: 100

  # DP 117: load_balancing_current (Value / integer, scale 2)
  - entity: number
    translation_key: load_balancing_current
    category: config
    class: current
    mode: box
    icon: "mdi:current-ac"
    dps:
      - id: 117
        type: integer
        name: value
        unit: A
        range:
          min: 0
          max: 200
        mapping:
          - scale: 100

  # DP 116: load_balancing_state (Boolean)
  - entity: binary_sensor
    translation_key: load_balancing_state
    class: safety
    dps:
      - id: 116
        type: boolean
        name: sensor

  # DP 123: charge_pattern (Enum)
  - entity: select
    translation_key: charge_pattern
    icon: "mdi:ev-station"
    category: config
    dps:
      - id: 123
        type: string
        name: option
        mapping:
          - dps_val: netversion
            value: Сетевая Версия
          - dps_val: standalone
            value: Автономный Нормальный
          - dps_val: standalone_reserved
            value: Автономный Резервный
          - dps_val: plug_and_charge
            value: Подключи и Заряжай

  # DP 126: measurement_model (Enum)
  - entity: select
    translation_key: measurement_model
    category: config
    dps:
      - id: 126
        type: string
        name: option
        mapping:
          - dps_val: internal_meter
            value: Внутренний Счетчик
          - dps_val: external_meter
            value: Внешний Счетчик

  # DP 128: earth_test (Enum)
  - entity: select
    translation_key: earth_test
    category: config
    dps:
      - id: 128
        type: string
        name: option
        mapping:
          - dps_val: enabled_energy
            value: Включен
          - dps_val: forbidden_energy
            value: Отключен

  # DP 129: pen_protect (Enum)
  - entity: select
    translation_key: pen_protect
    category: config
    dps:
      - id: 129
        type: string
        name: option
        mapping:
          - dps_val: enabled_energy
            value: Включена
          - dps_val: forbidden_energy
            value: Отключена

  # DP 140: network_model (Enum)
  - entity: select
    translation_key: network_model
    category: config
    dps:
      - id: 140
        type: string
        name: option
        mapping:
          - dps_val: LAN
            value: LAN
          - dps_val: 4G
            value: 4G

  # DP 142: touch_warning (Boolean)
  - entity: binary_sensor
    translation_key: touch_warning
    class: problem
    dps:
      - id: 142
        type: boolean
        name: sensor

  # DP 143: ocpp_tls (Boolean)
  - entity: switch
    translation_key: ocpp_tls_encryption
    category: config
    dps:
      - id: 143
        type: boolean
        name: switch

  # DP 127: version_number (String)
  - entity: sensor
    translation_key: firmware_version
    category: diagnostic
    dps:
      - id: 127
        type: string
        name: sensor

  # DP 152: device_number (String)
  - entity: sensor
    translation_key: device_number
    category: diagnostic
    dps:
      - id: 152
        type: string
        name: sensor

  # DP 113: pile_number (String)
  - entity: sensor
    translation_key: station_code
    category: diagnostic
    dps:
      - id: 113
        type: string
        name: sensor

  # DP 111: charge_money (Value / integer, scale 2)
  - entity: sensor
    translation_key: accumulated_balance
    class: monetary
    dps:
      - id: 111
        type: integer
        name: sensor
        unit: RUB
        class: total_increasing
        mapping:
          - scale: 100

  # DP 112: card_balance (Value / integer, scale 2)
  - entity: sensor
    translation_key: card_balance
    class: monetary
    dps:
      - id: 112
        type: integer
        name: sensor
        unit: RUB
        class: total_increasing
        mapping:
          - scale: 100

  # DP 102: is_login (Boolean)
  - entity: binary_sensor
    translation_key: login_status
    class: connectivity
    dps:
      - id: 102
        type: boolean
        name: sensor

  # DP 114: cp (Value / integer, scale 2)
  - entity: sensor
    translation_key: cp_voltage
    class: voltage
    dps:
      - id: 114
        type: integer
        name: sensor
        unit: V
        class: measurement
        mapping:
          - scale: 100

  # DP 124: equipment_time (String)
  - entity: sensor
    translation_key: equipment_time
    category: diagnostic
    dps:
      - id: 124
        type: string
        name: sensor

  # DP 125: ocpp_url (String)
  - entity: text
    translation_key: ocpp_url
    category: config
    dps:
      - id: 125
        type: string
        name: value

  # DP 132: apn (String)
  - entity: text
    translation_key: apn
    category: config
    dps:
      - id: 132
        type: string
        name: value

  # DP 133: apn_user_name (String)
  - entity: text
    translation_key: apn_user
    category: config
    dps:
      - id: 133
        type: string
        name: value

  # DP 134: apn_user_password (String)
  - entity: text
    translation_key: apn_password
    category: config
    dps:
      - id: 134
        type: string
        name: value

  # DP 135: charge_card_no1 (String)
  - entity: text
    translation_key: authorized_card_1
    category: config
    dps:
      - id: 135
        type: string
        name: value

  # DP 136: charge_card_no2 (String)
  - entity: text
    translation_key: authorized_card_2
    category: config
    dps:
      - id: 136
        type: string
        name: value

  # DP 141: qr_code_prefix (String)
  - entity: text
    translation_key: qr_code_prefix
    category: config
    dps:
      - id: 141
        type: string
        name: value
