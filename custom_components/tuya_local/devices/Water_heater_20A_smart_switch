name: Water_heater_20A_smart_switch
products:
  - id: dcqi7rv16ft3oneb
    manufacturer: ANDELI_WIFI_SMART_BOILER
entities:
  - entity: switch
    dps:
      - id: 1
        name: switch
        type: boolean
  - entity: number
    translation_key: timer
    class: duration
    category: config
    dps:
      - id: 7
        name: value
        type: integer
        range:
          min: 0
          max: 86400
        mapping:
          - scale: 60
        unit: min
  - entity: select
    translation_key: initial_state
    category: config
    dps:
      - id: 14
        type: string
        name: option
        optional: true
        mapping:
          - conditions:
              - dps_val: ["power_on", "power_off", "restart_memory"]
                mapping:
                  - dps_val: "power_off"
                    value: "0"
                  - dps_val: "power_on"
                    value: "1"
                  - dps_val: "restart_memory"
                    value: "2"
              # during startup there may be no value, but we need the options
              - dps_val: null
                mapping:
                  - dps_val: "power_off"
                    value: "0"
                  - dps_val: "power_on"
                    value: "1"
                  - dps_val: "restart_memory"
                    value: "2"
  - entity: light
    translation_key: backlight
    category: config
    dps:
      - id: 16
        name: switch
        type: boolean
